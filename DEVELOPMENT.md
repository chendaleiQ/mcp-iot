# å¼€å‘æŒ‡å—

## ğŸš€ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

#### æ¨èæ–¹å¼ï¼šts-node-dev

```bash
npm run dev
```

**ç‰¹æ€§ï¼š**

- âœ… è‡ªåŠ¨é‡å¯ï¼šä¿®æ”¹ä»£ç åè‡ªåŠ¨é‡å¯æœåŠ¡å™¨
- âœ… å¿«é€Ÿç¼–è¯‘ï¼šä½¿ç”¨ transpileOnly æ¨¡å¼ï¼Œè·³è¿‡ç±»å‹æ£€æŸ¥
- âœ… æ™ºèƒ½å¿½ç•¥ï¼šè‡ªåŠ¨å¿½ç•¥ node_modulesã€build ç­‰ç›®å½•
- âœ… å®æ—¶ç›‘æ§ï¼šç›‘æ§ src ç›®å½•ä¸‹çš„æ‰€æœ‰ TypeScript æ–‡ä»¶

#### å¤‡é€‰æ–¹å¼ï¼šnodemon

```bash
npm run dev:watch
```

**ç‰¹æ€§ï¼š**

- âœ… æ›´ç²¾ç»†çš„æ–‡ä»¶ç›‘æ§
- âœ… å¯é…ç½®çš„å¿½ç•¥è§„åˆ™
- âœ… å»¶è¿Ÿé‡å¯é¿å…é¢‘ç¹é‡å¯
- âœ… æ”¯æŒè‡ªå®šä¹‰é…ç½®æ–‡ä»¶

#### è°ƒè¯•æ¨¡å¼

```bash
npm run dev:debug
```

**ç‰¹æ€§ï¼š**

- âœ… å¯ç”¨ Node.js è°ƒè¯•å™¨
- âœ… æ”¯æŒæ–­ç‚¹è°ƒè¯•
- âœ… è‡ªåŠ¨é‡å¯åŠŸèƒ½
- âœ… å¼€å‘å·¥å…·é›†æˆ

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### nodemon.json

```json
{
  "watch": ["src"],
  "ext": "ts,js,json",
  "ignore": [
    "src/**/*.spec.ts",
    "src/**/*.test.ts",
    "node_modules",
    "build",
    "dist"
  ],
  "exec": "ts-node src/index.ts",
  "env": {
    "NODE_ENV": "development"
  },
  "delay": "1000"
}
```

### ts-node-dev.json

```json
{
  "respawn": true,
  "transpileOnly": true,
  "ignore": [
    "node_modules/**/*",
    "build/**/*",
    "dist/**/*",
    "*.test.ts",
    "*.spec.ts"
  ],
  "watch": ["src/**/*"],
  "ext": "ts,js,json"
}
```

## ğŸ“ å¼€å‘å·¥ä½œæµ

### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 2. ä¿®æ”¹ä»£ç 

- ä¿®æ”¹ `src/` ç›®å½•ä¸‹çš„ä»»ä½• TypeScript æ–‡ä»¶
- æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ£€æµ‹å˜åŒ–å¹¶é‡å¯
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºç¡®è®¤é‡å¯æˆåŠŸ

### 3. æµ‹è¯•åŠŸèƒ½

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:9088/health

# æµ‹è¯•MCPå·¥å…·
# ä½¿ç”¨æ‚¨çš„MCPå®¢æˆ·ç«¯æˆ–æµ‹è¯•è„šæœ¬
```

### 4. è°ƒè¯•é—®é¢˜

- æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—è¾“å‡º
- ä½¿ç”¨ `npm run dev:debug` å¯ç”¨è°ƒè¯•æ¨¡å¼
- åœ¨ä»£ç ä¸­æ·»åŠ  `debugger` è¯­å¥

## ğŸ› å¸¸è§é—®é¢˜

### 1. æœåŠ¡å™¨æ²¡æœ‰è‡ªåŠ¨é‡å¯

**å¯èƒ½åŸå› ï¼š**

- æ–‡ä»¶æ²¡æœ‰è¢«ç›‘æ§ï¼ˆæ£€æŸ¥ nodemon.json æˆ– ts-node-dev.jsonï¼‰
- æ–‡ä»¶æ‰©å±•åä¸åœ¨ç›‘æ§åˆ—è¡¨ä¸­
- æ–‡ä»¶åœ¨å¿½ç•¥åˆ—è¡¨ä¸­

**è§£å†³æ–¹æ¡ˆï¼š**

- ç¡®ä¿æ–‡ä»¶åœ¨ `src/` ç›®å½•ä¸‹
- æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦ä¸º `.ts`ã€`.js` æˆ– `.json`
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨å¿½ç•¥åˆ—è¡¨ä¸­

### 2. é‡å¯è¿‡äºé¢‘ç¹

**è§£å†³æ–¹æ¡ˆï¼š**

- ä½¿ç”¨ `npm run dev:watch` æ›¿ä»£ `npm run dev`
- è°ƒæ•´ nodemon.json ä¸­çš„ `delay` å‚æ•°
- åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ›´å¤šå¿½ç•¥è§„åˆ™

### 3. ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**

- æ£€æŸ¥ TypeScript è¯­æ³•é”™è¯¯
- è¿è¡Œ `npm run build` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
- ç¡®ä¿æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®

### 4. ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :9088

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# æˆ–è€…ä½¿ç”¨ä¸åŒçš„ç«¯å£
PORT=9089 npm run dev
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æ—¥å¿—è°ƒè¯•

```typescript
import { logger } from "../utils/logger";

// æ·»åŠ è°ƒè¯•æ—¥å¿—
logger.debug("è°ƒè¯•ä¿¡æ¯", { data: someData });
logger.info("ä¸€èˆ¬ä¿¡æ¯");
logger.warn("è­¦å‘Šä¿¡æ¯");
logger.error("é”™è¯¯ä¿¡æ¯", { error: err });
```

### 2. æ–­ç‚¹è°ƒè¯•

```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
npm run dev:debug
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `chrome://inspect` æˆ–ä½¿ç”¨ VS Code è°ƒè¯•å™¨ã€‚

### 3. ç¯å¢ƒå˜é‡è°ƒè¯•

```bash
# è®¾ç½®è°ƒè¯•ç¯å¢ƒå˜é‡
DEBUG=* npm run dev

# æˆ–è€…è®¾ç½®æ—¥å¿—çº§åˆ«
LOG_LEVEL=debug npm run dev
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å¼€å‘ç¯å¢ƒä¼˜åŒ–

- ä½¿ç”¨ `transpileOnly` æ¨¡å¼è·³è¿‡ç±»å‹æ£€æŸ¥
- å¿½ç•¥ä¸å¿…è¦çš„æ–‡ä»¶å’Œç›®å½•
- ä½¿ç”¨å»¶è¿Ÿé‡å¯é¿å…é¢‘ç¹é‡å¯

### 2. ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

```bash
# ç¼–è¯‘ä¼˜åŒ–
npm run build

# è¿è¡Œä¼˜åŒ–åçš„ä»£ç 
npm run start:prod
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
npm test
```

### æ‰‹åŠ¨æµ‹è¯•

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:9088/health

# æµ‹è¯•MCPåŠŸèƒ½
node test-modular.js
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [Express.js å®˜æ–¹æ–‡æ¡£](https://expressjs.com/)
- [ts-node-dev æ–‡æ¡£](https://github.com/wclr/ts-node-dev)
- [nodemon æ–‡æ¡£](https://nodemon.io/)

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ç›¸å…³é…ç½®æ–‡ä»¶
3. è¿è¡Œ `npm run build` æ£€æŸ¥ç¼–è¯‘é”™è¯¯
4. æŸ¥çœ‹é¡¹ç›® README.md å’Œ REFACTORING_SUMMARY.md
